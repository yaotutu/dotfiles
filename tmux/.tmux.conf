# =========================
# tmux 极简稳定版（先跑起来）
# =========================

# 1) 前缀：Ctrl+a（常用且稳定）
set -g prefix C-a
unbind C-b

# 2) 基础
set -g mouse on
set -g history-limit 100000
set -sg escape-time 0
setw -g mode-keys vi

# 2) 编号从 1 开始（窗口 / pane）
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# 3) 常用：重载配置
bind r source-file ~/.tmux.conf \; display-message "tmux.conf 已重载"

# 4) 常用：窗口/会话
bind c new-window -c "#{pane_current_path}"   # 新窗口（保持路径）
bind d detach-client                          # detach
bind q kill-pane                              # 关闭 pane

# 5) 分屏（保持路径）
bind h split-window -hb -c "#{pane_current_path}"  # 左
bind j split-window -v  -c "#{pane_current_path}"  # 下
bind k split-window -vb -c "#{pane_current_path}"  # 上
bind l split-window -h  -c "#{pane_current_path}"  # 右

# 6) Pane 导航（不用前缀）
# Alt + h/j/k/l：在 pane 之间移动
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# 7) Pane 调整大小（不用前缀）
# Alt + Shift + H/J/K/L：调整当前 pane 大小
bind -n M-H resize-pane -L 5
bind -n M-J resize-pane -D 5
bind -n M-K resize-pane -U 5
bind -n M-L resize-pane -R 5

# 8) 窗口切换（不用前缀）
# Alt + 1~9：快速切换到第 1~9 个窗口
bind -n M-1 select-window -t 1
bind -n M-2 select-window -t 2
bind -n M-3 select-window -t 3
bind -n M-4 select-window -t 4
bind -n M-5 select-window -t 5
bind -n M-6 select-window -t 6
bind -n M-7 select-window -t 7
bind -n M-8 select-window -t 8
bind -n M-9 select-window -t 9

# Alt + , / .：上一个 / 下一个窗口（更稳，不用方向键）
bind -n M-, select-window -t -1
bind -n M-. select-window -t +1


# Alt+v：进入复制模式
bind -n M-v copy-mode

# copy-mode：v 选择，y 复制到系统剪贴板（macOS：pbcopy）并退出
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# Ctrl+v：矩形选择（可选）
bind -T copy-mode-vi C-v send-keys -X rectangle-toggle


# 11) 帮助 / 命令行 / 日志（稳定内置功能）
# Ctrl+a ?：查看所有快捷键（非常有用）
bind ? list-keys

# Ctrl+a :：进入 tmux 命令行（输入 tmux 命令）
bind : command-prompt

# Ctrl+a ~：显示 tmux 消息日志（调试/看报错时很有用）
# bind ~ show-messages


# 12) 交换 pane（需要前缀，避免误触）
# Ctrl+a > ：把当前 pane 与“下面”的 pane 交换
bind > swap-pane -D

# Ctrl+a < ：把当前 pane 与“上面”的 pane 交换
bind < swap-pane -U

# Ctrl+a | ：与“下一个 pane”交换（循环交换一次）
bind | swap-pane

# 13) 布局（Layouts）
#
# Ctrl+a Space  = 循环切换布局（最常用）
# Ctrl+a L      = 打开布局选择菜单（可视化选择）
#
# Ctrl+a t      = tiled（平铺网格）
# Ctrl+a e      = even-horizontal（上下等分）
# Ctrl+a E      = even-vertical（左右等分）
# Ctrl+a m      = main-horizontal（上大下小/主窗在上）
# Ctrl+a M      = main-vertical（左大右小/主窗在左）

bind Space next-layout
# bind L choose-layout

bind t select-layout tiled
bind e select-layout even-horizontal
bind E select-layout even-vertical
bind m select-layout main-horizontal
bind M select-layout main-vertical




# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

set -g @plugin 'catppuccin/tmux#v2.1.3' # See https://github.com/catppuccin/tmux/tags for additional tags


# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'