layout {
    default_tab_template {
        // --- é¡¶éƒ¨çŠ¶æ€æ ï¼šæç¤ºä¿¡æ¯ (ä¿æŒç®€æ´) ---
        pane size=1 borderless=true {
            plugin location="https://github.com/dj95/zjstatus/releases/download/v0.20.2/zjstatus.wasm" {
                format_left   ""
                format_center "{pipe_zjstatus_hints}"
                format_right  ""
                format_space  ""
                pipe_zjstatus_hints_format "{output}"
                border_enabled  "false"
                hide_frame_for_single_pane "false"
            }
        }

        children

        // --- åº•éƒ¨çŠ¶æ€æ ï¼šMode (å·¦) / Tabs (ä¸­) / Git Status + Session + Time (å³) ---
        pane size=1 borderless=true {
            // ä½¿ç”¨ç®€çŸ­çš„åˆ«å 'zjstatus'
            plugin location="zjstatus" {
                // 1. Mode ç‹¬å  format_left
                format_left   "{mode}"
                // 2. Tabs ç‹¬å  format_center
                format_center "{tabs}"
                // 3. Git Status (åˆ†æ”¯/ä¿®æ”¹/Push/Pull), Time, Session æ”¾åœ¨ format_right
                format_right  " #[fg=#7a6c94]î‚¶#[bg=#7a6c94,fg=#ffffff,bold] {command_git_info}{command_git_status} #[fg=#7a6c94]î‚´ {datetime} #[bg=#6e5fb7,fg=#ffffff,bold] {session} "
                format_space  ""

                border_enabled  "false"
                border_char     "â”€"
                border_format   "#[fg=#4C435C]{char}"
                border_position "top"

                hide_frame_for_single_pane "false"

                // --- æ¨¡å¼æŒ‡ç¤ºå™¨é…è‰² (Catppuccin/Nord é£æ ¼) ---
                mode_locked      "#[bg=#6e5fb7,fg=#ffffff,bold] â¤ "
                mode_normal      "#[bg=#aa87fe,fg=#3c01cd,bold] â¤ NORMAL "
                mode_resize      "#[bg=#ff9969,fg=#7f3513,bold] â¤ RESIZE "
                mode_pane        "#[bg=#9FFBB6,fg=#30563a,bold] â¤ PANE "
                mode_move        "#[bg=#FFD896,fg=#905b00,bold] â¤ MOVE "
                mode_tab         "#[bg=#80BDFF,fg=#0051a8,bold] â¤ TAB "
                mode_scroll      "#[bg=#412da2,fg=#c9c0ff,bold] â¤ SCROLL "
                mode_search      "#[bg=#e28e00,fg=#ffe9c4,bold] â¤ SEARCH "
                mode_entersearch "#[bg=#e28e00,fg=#ffe9c4,bold] â¤ ENTER SEARCH "
                mode_renametab   "#[bg=#0051a8,fg=#80BDFF,bold] â¤ RENAME TAB "
                mode_renamepane  "#[bg=#30563a,fg=#9FFBB6,bold] â¤ RENAME PANE "
                mode_session     "#[bg=#FF87A5,fg=#7d001f,bold] â¤ SESSION "
                mode_tmux        "#[bg=#c9c0ff,fg=#412da2,bold] â¤ TMUX "

                // --- æ ‡ç­¾é¡µæ ·å¼ ---
                tab_active              "#[bg=#9c73fe,fg=#f2ecff,bold] {index} {name} "
                tab_active_fullscreen   "#[bg=#9c73fe,fg=#f2ecff,bold] {fullscreen_indicator} {index} {name} "
                tab_active_sync         "#[bg=#9c73fe,fg=#f2ecff,bold] {sync_indicator} {index} {name} "

                tab_normal              "#[fg=#7a6c94,bold] {index} {name} "
                tab_normal_fullscreen   "#[fg=#7a6c94,bold] {fullscreen_indicator} {index} {name} "
                tab_normal_sync         "#[fg=#7a6c94,bold] {sync_indicator} {index} {name} "

                tab_separator " "

                tab_sync_indicator       "ó°“¦"
                tab_fullscreen_indicator "ó°Š“"
                tab_floating_indicator   "â¬š"

                tab_rename              "#[bg=#80BDFF,fg=#0051a8,bold] {index} {name} {floating_indicator} "

                tab_display_count         "9"
                tab_truncate_start_format "#[fg=#FFD080] ïƒ™ +{count} î©¼ "
                tab_truncate_end_format   "#[fg=#FFD080] î©¼  +{count} ïƒš"

                // --- æ—¶é—´é…ç½® ---
                datetime        "#[fg=#7a6c94,bold] {format} "
                datetime_format "%m-%d %H:%M"
                datetime_timezone "Asia/Shanghai"
                
                // --- ğŸŒŸ Git çŠ¶æ€å‘½ä»¤ 1: åˆ†æ”¯å + ä¿®æ”¹çŠ¶æ€ (ç±»ä¼¼ VS Code) ---
                command_git_info_command "sh -c '/bin/bash ~/.config/zellij/scripts/git_info_processor.sh'"
                command_git_info_format "{stdout}" // è„šæœ¬ç›´æ¥è¾“å‡ºæ ¼å¼åŒ–å­—ç¬¦ä¸²
                command_git_info_interval 2
                command_git_info_rendermode "dynamic" // å¿…é¡»ä½¿ç”¨ dynamic/raw æ¥æ”¯æŒé¢œè‰²ä»£ç 

                // --- ğŸŒŸ Git çŠ¶æ€å‘½ä»¤ 2: Push/Pull è®¡æ•° ---
                // ä½¿ç”¨ sh -c åŒ…è£…æ‚¨çš„è„šæœ¬ï¼Œç¡®ä¿ ~ ç¬¦å·è¢«æ­£ç¡®è§£æ
                // command_git_status_command "sh -c '/bin/bash ~/.config/zellij/scripts/git_status_info.sh'"
                // command_git_status_format " {stdout}" // æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨äº† 'command_' å˜é‡ï¼Œä½†åœ¨ format_right ä¸­ä½¿ç”¨çš„æ˜¯ 'command_git_status'
                // command_git_status_rendermode "dynamic"
                // command_git_status_interval 5
            }
        }
    }
    tab name="î©±"
}